import{d as m}from"./chunk-JLEYIN34.js";import{a as u}from"./chunk-ANSMRTUX.js";import{D as g,Ja as p,R as a,Tb as h,X as l}from"./chunk-6VFV3J45.js";var n=class r{get(t){if(!t)return null;let o=t+"=",s=document.cookie.split(";");for(let i=0;i<s.length;i++){let e=s[i];for(;e.charAt(0)===" ";)e=e.substring(1,e.length);if(e.indexOf(o)===0)return e.substring(o.length,e.length)}return null}set(t,o,s){let i="";if(s){let e=new Date;e.setTime(e.getTime()+s*24*60*60*1e3),i="; expires="+e.toString()}document.cookie=t+"="+JSON.stringify(o)+i+"; path=/"}delete(t){this.set(t,"",-1)}update(t,o){this.set(t,o)}exists(t){return!!this.get(t)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};var c=class r{http=l(h);storage=l(n);_auth=p(null);router=l(m);login(t){return this.http.post(`${u.REST}/users/login`,t)}get auth(){if(!this._auth()){let t=this.storage.get("user");t&&this._auth.set(JSON.parse(t))}return this._auth.asReadonly()}isLogged(){return this.storage.exists("user")}logout(){let t=this._auth()?.token;this.http.post(`${u.REST}/users/logout`,{token:t}).pipe(g(1)).subscribe(),this.storage.delete("user"),this._auth.set(null),this.redirect()}redirect(t="/"){this.router.navigateByUrl(t)}static \u0275fac=function(o){return new(o||r)};static \u0275prov=a({token:r,factory:r.\u0275fac,providedIn:"root"})};export{n as a,c as b};
