import{a as N}from"./chunk-OOOMPTXR.js";import{a as P}from"./chunk-ABU5WIBM.js";import{a as p,b as R,c as M,d as $,e as D,f as O}from"./chunk-XIAVSE5S.js";import{m as k}from"./chunk-337TLXEY.js";import{A as b,Ba as s,D as H,M as E,O as c,Oa as g,R as T,Va as j,Wa as d,X as n,Xa as u,Ya as y,Z as w,Za as o,_a as r,cb as f,gb as l,hb as F,i as _,ib as q,jb as B,kb as I,w as v,xb as S,y as x}from"./chunk-MGJER5G2.js";import"./chunk-2VMXMS7J.js";var m=class t{http=n(k);loadHistories(){return this.http.post(`${O.REST}/history/list`,{})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=T({token:t,factory:t.\u0275fac})};var z={historyState:{data:null,state:"idle"},pesquisando:!1},C=R(D(z),$((t,i=n(m),e=n(P))=>({loadHistories(){p(t,{historyState:{data:null,state:"loading"},pesquisando:!1}),v(2e3).pipe(N(),x(()=>!t.pesquisando()),c(()=>p(t,{pesquisando:!0})),E(()=>i.loadHistories().pipe(H(1),c(a=>{p(t,{historyState:{data:a,state:"success"}})}),b(a=>(p(t,{historyState:{data:null,state:"error"}}),e.error(a.message),_)))),c(()=>p(t,{pesquisando:!1}))).subscribe()}})),M(t=>({historyColumns:S(()=>t.historyState()?.data?Object.keys(t.historyState().data[0]):[]),historyRows:S(()=>t.historyState()?.data?t.historyState().data?.map(i=>Object.values(i)):[])})));function A(t,i){t&1&&(o(0,"div",1)(1,"div",3),l(2,"Carregando..."),r()())}function G(t,i){t&1&&(o(0,"div",1)(1,"div",3),l(2," Erro ao carregar dados "),r()())}function J(t,i){if(t&1&&(o(0,"th"),l(1),r()),t&2){let e=i.$implicit;s(),F(e)}}function K(t,i){if(t&1&&(o(0,"td"),l(1),r()),t&2){let e=i.$index,a=f().$implicit;s(),q(" ",a[e]," ")}}function L(t,i){if(t&1&&(o(0,"tr"),u(1,K,2,1,"td",null,d),r()),t&2){let e=f(2);s(),y(e.historyColumns())}}function Q(t,i){if(t&1&&(o(0,"table",2)(1,"thead")(2,"tr"),u(3,J,2,1,"th",null,d),r()(),o(5,"tbody"),u(6,L,3,0,"tr",null,d),r()()),t&2){let e=f();s(3),y(e.historyColumns()),s(3),y(e.historyRows())}}var U=class t{pushButtonPanelStore=n(C);historyState=this.pushButtonPanelStore.historyState;historyColumns=this.pushButtonPanelStore.historyColumns;historyRows=this.pushButtonPanelStore.historyRows;constructor(){this.pushButtonPanelStore.loadHistories()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-history"]],standalone:!0,features:[B([m,C]),I],decls:6,vars:1,consts:[[1,"d-flex","justify-content-between","align-items-center"],[1,"card"],[1,"table","table-striped","table-bordered","mt-3"],[1,"card-body","d-flex","justify-content-center"]],template:function(e,a){if(e&1&&(o(0,"div",0)(1,"h3"),l(2,"Hist\xF3rico"),r()(),g(3,A,3,0,"div",1)(4,G,3,0,"div",1)(5,Q,8,0,"table",2)),e&2){let h;s(3),j((h=a.historyState().state)==="loading"?3:h==="error"?4:h==="success"?5:-1)}}})};export{U as HistoryComponent};
