import{a as f}from"./chunk-OOOMPTXR.js";import{a as y}from"./chunk-ABU5WIBM.js";import{a,b as v,c as C,d as P,e as j,f as S}from"./chunk-XIAVSE5S.js";import{m as q}from"./chunk-337TLXEY.js";import{A as p,D as b,M as d,O as s,R as h,X as n,i as m,w as r,xb as i,y as u}from"./chunk-MGJER5G2.js";var c=class t{http=n(q);loadCalls(){return this.http.post(`${S.REST}/button/call/list`,{})}loadCommunications(){return this.http.post(`${S.REST}/button/comm`,{})}static \u0275fac=function(l){return new(l||t)};static \u0275prov=h({token:t,factory:t.\u0275fac})};var w={callsState:{data:null,state:"idle"},communicationsState:{data:null,state:"idle"},pesquisando:!1},D=v(j(w),P((t,e=n(c),l=n(y))=>({loadCalls(){a(t,{callsState:{data:null,state:"loading"},pesquisando:!1}),r(5e3).pipe(f(),u(()=>!t.pesquisando()),s(()=>a(t,{pesquisando:!0})),d(()=>e.loadCalls().pipe(b(1),s(o=>{a(t,{callsState:{data:o,state:"success"}})}),p(o=>(a(t,{callsState:{data:null,state:"error"}}),l.error(o.message),m)))),s(()=>a(t,{pesquisando:!1}))).subscribe()},loadCommunications(){a(t,{communicationsState:{data:null,state:"loading"},pesquisando:!1}),r(2e3).pipe(f(),u(()=>!t.pesquisando()),s(()=>a(t,{pesquisando:!0})),d(()=>e.loadCommunications().pipe(s(o=>{a(t,{communicationsState:{data:o,state:"success"}})}),p(o=>(a(t,{communicationsState:{data:null,state:"error"}}),l.error(o.message),m)))),s(()=>a(t,{pesquisando:!1}))).subscribe()}})),C(t=>({callsColumns:i(()=>t.callsState()?.data?Object.keys(t.callsState().data[0]):[]),callsRows:i(()=>t.callsState()?.data?t.callsState().data?.map(e=>Object.values(e)):[]),communicationsColumns:i(()=>t.communicationsState()?.data?Object.keys(t.communicationsState().data[0]):[]),communicationsRows:i(()=>t.communicationsState()?.data?t.communicationsState().data?.map(e=>Object.values(e)):[])})));export{c as a,D as b};
