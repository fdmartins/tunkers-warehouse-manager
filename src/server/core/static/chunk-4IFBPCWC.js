import{Bb as l,Cb as S,Ia as v,Ja as I,R as b,X as j,a as p,la as k}from"./chunk-6VFV3J45.js";import{a as e,b as a}from"./chunk-2VMXMS7J.js";var A=new WeakMap,c=Symbol("STATE_SOURCE");function L(t,...n){t[c].update(o=>n.reduce((i,r)=>e(e({},i),typeof r=="function"?r(i):r),o)),C(t)}function E(t){return t[c]()}function W(t){return A.get(t[c][p])||[]}function C(t){let n=W(t);for(let o of n){let i=S(()=>E(t));o(i)}}function w(t){let n=S(()=>t());return H(n)?new Proxy(t,{get(o,i){return i in n?(v(o[i])||Object.defineProperty(o,i,{value:l(()=>o()[i]),configurable:!0}),w(o[i])):o[i]}}):t}function H(t){return t?.constructor===Object}function N(...t){let n=[...t],o=typeof n[0]=="function"?{}:n.shift(),i=n;return(()=>{class s{constructor(){let u=i.reduce((f,T)=>T(f),O()),{stateSignals:d,computedSignals:D,methods:M,hooks:R}=u,m=e(e(e({},d),D),M);this[c]=o.protectedState===!1?u[c]:u[c].asReadonly();for(let f in m)this[f]=m[f];let{onInit:h,onDestroy:y}=R;h&&h(),y&&j(k).onDestroy(y)}static \u0275fac=function(d){return new(d||s)};static \u0275prov=b({token:s,factory:s.\u0275fac,providedIn:o.providedIn||null})}return s})()}function O(){return{[c]:I({}),stateSignals:{},computedSignals:{},methods:{},hooks:{}}}function _(t){return n=>{let o=t(e(e({},n.stateSignals),n.computedSignals));return Object.keys(o),a(e({},n),{computedSignals:e(e({},n.computedSignals),o)})}}function z(t){return n=>{let o=t(e(e(e({[c]:n[c]},n.stateSignals),n.computedSignals),n.methods));return Object.keys(o),a(e({},n),{methods:e(e({},n.methods),o)})}}function B(t){return n=>{let o=typeof t=="function"?t():t,i=Object.keys(o);n[c].update(s=>e(e({},s),o));let r=i.reduce((s,g)=>{let u=l(()=>n[c]()[g]);return a(e({},s),{[g]:w(u)})},{});return a(e({},n),{stateSignals:e(e({},n.stateSignals),r)})}}export{L as a,N as b,_ as c,z as d,B as e};
