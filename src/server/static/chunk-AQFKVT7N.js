import{a as p}from"./chunk-R5VLMNDW.js";import{a as g,b as i}from"./chunk-ODSXTPVL.js";import{a,b as c,c as M,d as f,e as A}from"./chunk-4IFBPCWC.js";import{A as h,Bb as l,O as S,X as u,i as m}from"./chunk-6VFV3J45.js";import{a as s,b as d}from"./chunk-2VMXMS7J.js";var O={authState:{state:"idle",data:null}},E=c({providedIn:"root"},A(O),f((t,e=u(i),b=u(g),L=u(p))=>({login(r){return a(t,{authState:{data:null,state:"loading"}}),e.login(r).pipe(S(o=>{if(o&&o.token){let n=d(s({},o),{username:r.username});b.set("user",n,1),a(t,{authState:{data:n,state:"success"}}),e.redirect()}else a(t,{authState:{data:null,state:"error",message:o.message}})}),h(o=>(console.log(o),a(t,{authState:{data:null,state:"error",message:"Falha de conex\xE3o com servidor"}}),m)))},auth(){let r=e.auth;return a(t,{authState:{data:r(),state:"success"}}),r},logout(){a(t,{authState:{data:null,state:"idle"}}),e.logout(),L.recreate()}})),M(({authState:t},e=u(i))=>({permission:l(()=>e.auth()?.role??"ANONYMOUS"),isLogged:l(()=>!!e.isLogged())})));export{E as a};
