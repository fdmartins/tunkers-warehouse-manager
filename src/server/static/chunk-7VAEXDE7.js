import{a as L,b as T,c as A,d as V,e as q,f as F,g as G,h as z,i as H,j as K,k as U,l as Y,m as J}from"./chunk-SH6EOPS2.js";import{a as $,b as j}from"./chunk-2YJ3FLSX.js";import{a as le}from"./chunk-BAP55IBU.js";import{a as p,b as se,d as me,e as de}from"./chunk-4IFBPCWC.js";import{a as N}from"./chunk-LZOUE64L.js";import{$a as m,A as M,Ba as l,D as S,Ja as oe,O as b,Oa as g,Sa as y,Ta as h,Tb as re,Va as x,Wa as O,X as u,Xa as k,Ya as _,Z as C,Za as n,_a as o,bb as I,cb as c,db as P,ga as w,ha as D,i as R,ib as r,jb as d,lb as ae,mb as E}from"./chunk-6VFV3J45.js";import{a as ie,b as ne}from"./chunk-2VMXMS7J.js";var ce={skuState:{state:"idle",data:[]},tabelaResumidaState:{state:"idle",data:[]},cadastrandoSku:!1,cadastrandoSkuBitola:!1};function pe(e){return e.get(`${N.REST}/products/complete`)}function fe(e){return e.get(`${N.REST}/products/summarized`)}function Se(e,t){return e.post(`${N.REST}/products/new/complete`,t)}function be(e,t){return e.post(`${N.REST}/products/delete/complete/${t}`,{})}function ke(e,t){return e.post(`${N.REST}/products/new/summarized`,t)}function _e(e,t){return e.post(`${N.REST}/products/delete/summarized/${t}`,{})}var f=se(de(ce),me((e,t=u(re),i=u(le))=>({skus(){p(e,{skuState:ne(ie({},e.skuState()),{state:"loading"})}),pe(t).pipe(S(1),b(a=>{p(e,{skuState:{data:a,state:"success"}})}),M(a=>(p(e,{skuState:{data:null,state:"error"}}),i.error("Erro ao obter dados de skus"),R))).subscribe()},tabelaResumida(){p(e,{tabelaResumidaState:ne(ie({},e.tabelaResumidaState()),{state:"loading"})}),fe(t).pipe(S(1),b(a=>{p(e,{tabelaResumidaState:{data:a,state:"success"}})}),M(a=>(p(e,{tabelaResumidaState:{data:null,state:"error"}}),i.error("Erro ao obter dados de tabela resumida"),R))).subscribe()},novoSku(a,s){p(e,{cadastrandoSku:!0}),Se(t,a).pipe(S(1),b(()=>{i.success("Cadastro do Sku realizado com sucesso"),p(e,{cadastrandoSku:!1}),s.close(),this.skus()}),M(v=>(p(e,{cadastrandoSku:!1}),i.error("Erro ao cadastrar Sku"),R))).subscribe()},novoSkuBitola(a,s){p(e,{cadastrandoSkuBitola:!0}),ke(t,a).pipe(S(1),b(()=>{i.success("Cadastro do Sku realizado com sucesso"),p(e,{cadastrandoSkuBitola:!1}),s.close(),this.tabelaResumida()}),M(v=>(p(e,{cadastrandoSkuBitola:!1}),i.error("Erro ao cadastrar Sku"),R))).subscribe()},excluirSku(a){be(t,a).pipe(S(1),b(()=>{i.success("Exclus\xE3o realizada com sucesso"),this.skus()}),M(s=>(i.error("Erro ao excluir Sku"),R))).subscribe()},excluirTabelaResumida(a){_e(t,a).pipe(S(1),b(()=>{i.success("Exclus\xE3o realizada com sucesso"),this.tabelaResumida()}),M(s=>(i.error("Erro ao excluir"),R))).subscribe()},limparSkuForm(){p(e,{cadastrandoSku:!1})}})));function Ce(e,t){if(e&1&&(n(0,"p"),r(1),o()),e&2){let i=t.$implicit;l(),d(i)}}function ge(e,t){if(e&1&&(n(0,"p"),r(1),o()),e&2){let i=t.$implicit;l(),d(i)}}function xe(e,t){e&1&&(n(0,"div",12),m(1,"div",14),n(2,"span"),r(3,"Cadastrando..."),o()())}function Ee(e,t){e&1&&(n(0,"span"),r(1,"Cadastrar"),o())}var Q=class e{skuForm=new q({sku:new F("",[T.required]),nome:new F("",[T.required]),tipo:new F("BOBINA",[T.required,T.minLength(3)])});modalRef=u($);store=u(f);isLoading=this.store.cadastrandoSku;errors(t){return this.skuForm.get(t)?.errors?Object.keys(this.skuForm.get(t)?.errors).map(i=>i==="required"?"Campo obrigat\xF3rio":i==="minlength"?`M\xEDnimo de ${this.skuForm.get(t)?.getError(i).requiredLength}`:i):null}cadastrar(){if(this.skuForm.valid){let t={sku:this.skuForm.value.sku,nome:this.skuForm.value.nome,tipo:this.skuForm.value.tipo};this.store.novoSku(t,this.modalRef)}}close(){this.modalRef.close()}ngOnDestroy(){this.store.limparSkuForm()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-sku-form"]],standalone:!0,features:[E],decls:32,vars:7,consts:[[1,"card"],[1,"card-body","d-flex","flex-column","gap-3",3,"formGroup"],[1,"card-title"],[1,"d-flex","flex-column","gap-2"],["type","text","placeholder","sku","formControlName","sku","autocomplete","off",1,"form-control"],[1,"invalid-feedback"],["aria-label","Default select example","formControlName","tipo",1,"form-select"],["value","BOBINA"],["value","PALLET"],["type","text","placeholder","nome","formControlName","nome","autocomplete","off",1,"form-control"],[1,"d-flex","justify-content-end","gap-3"],[1,"btn","btn-success","w-50",3,"click","disabled"],[1,"d-flex","align-items-center","justify-content-center","gap-2"],["type","button",1,"btn","btn-outline-secondary","w-50",3,"click","disabled"],["role","status",1,"spinner-border","text-light",2,"width","20px","height","20px"]],template:function(i,a){if(i&1&&(n(0,"div",0)(1,"form",1)(2,"h5",2),r(3,"Novo SKU"),o(),n(4,"label",3)(5,"span"),r(6,"Sku"),o(),m(7,"input",4),n(8,"div",5),k(9,Ce,2,1,"p",null,O),o()(),n(11,"label",3)(12,"span"),r(13,"Tipo"),o(),n(14,"select",6)(15,"option",7),r(16,"BOBINA"),o(),n(17,"option",8),r(18,"PALLET"),o()()(),n(19,"label",3)(20,"span"),r(21,"Nome"),o(),m(22,"input",9),n(23,"div",5),k(24,ge,2,1,"p",null,O),o()(),n(26,"div",10)(27,"button",11),c("click",function(){return a.cadastrar()}),g(28,xe,4,0,"div",12)(29,Ee,2,0,"span"),o(),n(30,"button",13),c("click",function(){return a.close()}),r(31," Cancelar "),o()()()()),i&2){let s;l(),y("formGroup",a.skuForm),l(8),_(a.errors("sku")),l(13),h("is-invalid",((s=a.skuForm.get("sku"))==null?null:s.touched)&&((s=a.skuForm.get("sku"))==null?null:s.invalid)),l(2),_(a.errors("sku")),l(3),y("disabled",a.skuForm.invalid)("disabled",a.isLoading()||a.skuForm.invalid),l(),x(a.isLoading()?28:29),l(2),y("disabled",a.isLoading())}},dependencies:[J,G,U,Y,L,K,A,V,z,H],styles:["[_nghost-%COMP%]{width:500px;padding:1rem}"]})};var Te=(e,t)=>t.id;function he(e,t){e&1&&(n(0,"tr")(1,"td",4),r(2,"Carregando dados..."),o()())}function Fe(e,t){e&1&&(n(0,"tr")(1,"td",4),r(2,"Erro ao carregar dados"),o()())}function ye(e,t){if(e&1){let i=I();n(0,"tr")(1,"td"),r(2),o(),n(3,"td"),r(4),o(),n(5,"td"),r(6),o(),n(7,"td",5)(8,"button",6),c("click",function(){let s=w(i).$implicit,v=P(2);return D(v.delete(s))}),m(9,"i",7),n(10,"span"),r(11,"Excluir"),o()()()()}if(e&2){let i=t.$implicit;l(2),d(i.sku),l(2),d(i.tipo),l(2),d(i.nome)}}function Re(e,t){if(e&1&&k(0,ye,12,3,"tr",null,Te),e&2){let i=P();_(i.skuState().data)}}var Z=class e{store=u(f);modalService=u(j);skuState=this.store.skuState;constructor(){this.store.skus()}novoSku(){this.modalService.open(Q,!0,null,[{provide:f,useValue:this.store}])}delete(t){t&&this.modalService.openConfirmation({title:"Excluir",message:`Deseja excluir: ${t.sku} - ${t.nome}?`}).afterClose.pipe(S(1),b(i=>{i&&this.store.excluirSku(t.id)})).subscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-sku"]],standalone:!0,features:[E],decls:20,vars:1,consts:[[1,"d-grid"],[1,"btn","btn-primary","d-inline-flex","gap-1","justify-content-center","align-items-center","col-12","col-md-4","col-xl-2",3,"click"],[1,"bi","bi-plus-lg"],[1,"table","table-striped","table-bordered","mt-1"],["colspan","4"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","d-flex","gap-1","justify-content-center","align-items-center",3,"click"],[1,"bi","bi-x-lg"]],template:function(i,a){if(i&1&&(n(0,"div",0)(1,"button",1),c("click",function(){return a.novoSku()}),m(2,"i",2),n(3,"span"),r(4,"Novo SKU"),o()()(),n(5,"table",3)(6,"thead")(7,"tr")(8,"th"),r(9,"SKU"),o(),n(10,"th"),r(11,"Tipo"),o(),n(12,"th"),r(13,"Nome"),o(),n(14,"th"),r(15,"A\xE7\xF5es"),o()()(),n(16,"tbody"),g(17,he,3,0,"tr")(18,Fe,3,0,"tr")(19,Re,2,0),o()()),i&2){let s;l(17),x((s=a.skuState().state)==="loading"?17:s==="error"?18:s==="success"?19:-1)}},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{text-align:left}"]})};function Me(e,t){if(e&1&&(n(0,"p"),r(1),o()),e&2){let i=t.$implicit;l(),d(i)}}function Oe(e,t){if(e&1&&(n(0,"p"),r(1),o()),e&2){let i=t.$implicit;l(),d(i)}}function Ne(e,t){if(e&1&&(n(0,"p"),r(1),o()),e&2){let i=t.$implicit;l(),d(i)}}function Pe(e,t){e&1&&(n(0,"div",13),m(1,"div",15),n(2,"span"),r(3,"Cadastrando..."),o()())}function Be(e,t){e&1&&(n(0,"span"),r(1,"Cadastrar"),o())}var ee=class e{skuForm=new q({sku:new F("",[T.required]),nome:new F("",[T.required]),tipo:new F("BOBINA",[T.required]),bitola:new F("",[T.required])});modalRef=u($);store=u(f);isLoading=this.store.cadastrandoSkuBitola;errors(t){return this.skuForm.get(t)?.errors?Object.keys(this.skuForm.get(t)?.errors).map(i=>i==="required"?"Campo obrigat\xF3rio":i==="minlength"?`M\xEDnimo de ${this.skuForm.get(t)?.getError(i).requiredLength}`:i):null}cadastrar(){if(this.skuForm.valid){let t={sku:this.skuForm.value.sku,nome:this.skuForm.value.nome,tipo:this.skuForm.value.tipo,bitola:this.skuForm.value.bitola};this.store.novoSkuBitola(t,this.modalRef)}}close(){this.modalRef.close()}ngOnDestroy(){this.store.limparSkuForm()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-tabela-resumida-form"]],standalone:!0,features:[E],decls:39,vars:11,consts:[[1,"card"],[1,"card-body","d-flex","flex-column","gap-3",3,"formGroup"],[1,"card-title"],[1,"d-flex","flex-column","gap-2"],["type","text","placeholder","sku","formControlName","sku","autocomplete","off",1,"form-control"],[1,"invalid-feedback"],["aria-label","Default select example","formControlName","tipo",1,"form-select"],["value","BOBINA"],["value","PALLET"],["type","text","placeholder","bitola","formControlName","bitola","autocomplete","off",1,"form-control"],["type","text","placeholder","nome","formControlName","nome","autocomplete","off",1,"form-control"],[1,"d-flex","justify-content-end","gap-3"],[1,"btn","btn-success","w-50",3,"click","disabled"],[1,"d-flex","align-items-center","justify-content-center","gap-2"],["type","button",1,"btn","btn-outline-secondary","w-50",3,"click","disabled"],["role","status",1,"spinner-border","text-light",2,"width","20px","height","20px"]],template:function(i,a){if(i&1&&(n(0,"div",0)(1,"form",1)(2,"h5",2),r(3,"Novo Resumido"),o(),n(4,"label",3)(5,"span"),r(6,"Sku"),o(),m(7,"input",4),n(8,"div",5),k(9,Me,2,1,"p",null,O),o()(),n(11,"label",3)(12,"span"),r(13,"Tipo"),o(),n(14,"select",6)(15,"option",7),r(16,"BOBINA"),o(),n(17,"option",8),r(18,"PALLET"),o()()(),n(19,"label",3)(20,"span"),r(21,"Bitola"),o(),m(22,"input",9),n(23,"div",5),k(24,Oe,2,1,"p",null,O),o()(),n(26,"label",3)(27,"span"),r(28,"Nome"),o(),m(29,"input",10),n(30,"div",5),k(31,Ne,2,1,"p",null,O),o()(),n(33,"div",11)(34,"button",12),c("click",function(){return a.cadastrar()}),g(35,Pe,4,0,"div",13)(36,Be,2,0,"span"),o(),n(37,"button",14),c("click",function(){return a.close()}),r(38," Cancelar "),o()()()()),i&2){let s,v,B;l(),y("formGroup",a.skuForm),l(6),h("is-invalid",((s=a.skuForm.get("sku"))==null?null:s.touched)&&((s=a.skuForm.get("sku"))==null?null:s.invalid)),l(2),_(a.errors("sku")),l(13),h("is-invalid",((v=a.skuForm.get("bitola"))==null?null:v.touched)&&((v=a.skuForm.get("bitola"))==null?null:v.invalid)),l(2),_(a.errors("nome")),l(5),h("is-invalid",((B=a.skuForm.get("nome"))==null?null:B.touched)&&((B=a.skuForm.get("nome"))==null?null:B.invalid)),l(2),_(a.errors("nome")),l(3),y("disabled",a.skuForm.invalid)("disabled",a.isLoading()||a.skuForm.invalid),l(),x(a.isLoading()?35:36),l(2),y("disabled",a.isLoading())}},dependencies:[J,G,U,Y,L,K,A,V,z,H],styles:["[_nghost-%COMP%]{width:500px;padding:1rem}"]})};var we=(e,t)=>t.id;function De(e,t){e&1&&(n(0,"tr")(1,"td",4),r(2,"Carregando dados..."),o()())}function Ie(e,t){e&1&&(n(0,"tr")(1,"td",4),r(2,"Erro ao carregar dados"),o()())}function $e(e,t){if(e&1){let i=I();n(0,"tr")(1,"td"),r(2),o(),n(3,"td"),r(4),o(),n(5,"td"),r(6),o(),n(7,"td"),r(8),o(),n(9,"td",5)(10,"button",6),c("click",function(){let s=w(i).$implicit,v=P(2);return D(v.delete(s))}),m(11,"i",7),n(12,"span"),r(13,"Excluir"),o()()()()}if(e&2){let i=t.$implicit;l(2),d(i.sku),l(2),d(i.tipo),l(2),d(i.bitola),l(2),d(i.nome)}}function je(e,t){if(e&1&&k(0,$e,14,4,"tr",null,we),e&2){let i=P();_(i.tabelaResumidaState().data)}}var te=class e{store=u(f);modalService=u(j);tabelaResumidaState=this.store.tabelaResumidaState;constructor(){this.store.tabelaResumida()}novoResumido(){this.modalService.open(ee,!0,null,[{provide:f,useValue:this.store}])}delete(t){t&&this.modalService.openConfirmation({title:"Excluir",message:`Deseja excluir: ${t.sku} - ${t.nome}?`}).afterClose.pipe(S(1),b(i=>{i&&this.store.excluirTabelaResumida(t.id)})).subscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-tabela-resumida"]],standalone:!0,features:[E],decls:22,vars:1,consts:[[1,"d-grid"],[1,"btn","btn-primary","d-inline-flex","gap-1","justify-content-center","align-items-center","col-12","col-md-4","col-xl-2",3,"click"],[1,"bi","bi-plus-lg"],[1,"table","table-striped","table-bordered","mt-1"],["colspan","5"],[1,"d-flex","justify-content-center","align-items-center"],[1,"btn","d-flex","gap-1","justify-content-center","align-items-center",3,"click"],[1,"bi","bi-x-lg"]],template:function(i,a){if(i&1&&(n(0,"div",0)(1,"button",1),c("click",function(){return a.novoResumido()}),m(2,"i",2),n(3,"span"),r(4,"Novo Resumido"),o()()(),n(5,"table",3)(6,"thead")(7,"tr")(8,"th"),r(9,"SKU"),o(),n(10,"th"),r(11,"Tipo"),o(),n(12,"th"),r(13,"Bitola"),o(),n(14,"th"),r(15,"Nome"),o(),n(16,"th"),r(17,"A\xE7\xF5es"),o()()(),n(18,"tbody"),g(19,De,3,0,"tr")(20,Ie,3,0,"tr")(21,je,2,0),o()()),i&2){let s;l(19),x((s=a.tabelaResumidaState().state)==="loading"?19:s==="error"?20:s==="success"?21:-1)}},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}[_nghost-%COMP%]   table[_ngcontent-%COMP%]{text-align:left}"]})};function Le(e,t){e&1&&m(0,"app-sku")}function Ae(e,t){e&1&&m(0,"app-tabela-resumida")}var ue=class e{tabSelecionada=oe("sku");selecionarTab(t){this.tabSelecionada.set(t)}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=C({type:e,selectors:[["app-products"]],standalone:!0,features:[ae([],[f]),E],decls:13,vars:5,consts:[[1,"d-flex","justify-content-between","align-items-center"],[1,"d-flex","flex-column","justify-content-between","gap-3"],[1,"nav","nav-tabs"],[1,"nav-item"],["aria-current","page",1,"nav-link",3,"click"],[1,"nav-link",3,"click"]],template:function(i,a){if(i&1&&(n(0,"div",0)(1,"h3"),r(2,"Produtos"),o()(),n(3,"div",1)(4,"ul",2)(5,"li",3)(6,"a",4),c("click",function(){return a.selecionarTab("sku")}),r(7,"SKU's"),o()(),n(8,"li",3)(9,"a",5),c("click",function(){return a.selecionarTab("tabela_resumida")}),r(10,"Tabela Resumida"),o()()(),g(11,Le,1,0,"app-sku")(12,Ae,1,0,"app-tabela-resumida"),o()),i&2){let s;l(6),h("active",a.tabSelecionada()==="sku"),l(3),h("active",a.tabSelecionada()==="tabela_resumida"),l(2),x((s=a.tabSelecionada())==="sku"?11:s==="tabela_resumida"?12:-1)}},dependencies:[Z,te],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:1rem}[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{background-color:#f1efefcd}[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:#000;-webkit-user-select:none;user-select:none;cursor:pointer}"]})};export{ue as ProductsComponent};
