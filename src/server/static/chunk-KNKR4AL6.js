import{a as I}from"./chunk-AZYVGLQ2.js";import{b as A}from"./chunk-2YJ3FLSX.js";import{b as k}from"./chunk-JLQCEZVO.js";import{b as N}from"./chunk-DBQGH5K4.js";import"./chunk-ZQFK667Q.js";import"./chunk-BAP55IBU.js";import"./chunk-4IFBPCWC.js";import"./chunk-JLEYIN34.js";import"./chunk-LZOUE64L.js";import{$a as x,Ba as a,Bb as D,D as h,Oa as _,Sa as C,Ta as B,Va as f,Wa as d,X as m,Xa as p,Ya as u,Z as v,Za as i,_a as o,bb as y,cb as E,db as r,ga as P,ha as b,ib as c,jb as T,kb as w,la as S,mb as F,ya as g}from"./chunk-6VFV3J45.js";import"./chunk-2VMXMS7J.js";function U(t,n){t&1&&(i(0,"div",1)(1,"div",3),c(2,"Carregando..."),o()())}function M(t,n){t&1&&(i(0,"div",1)(1,"div",3),c(2," Erro ao carregar dados "),o()())}function j(t,n){if(t&1&&(i(0,"th"),c(1),o()),t&2){let e=n.$implicit;a(),T(e)}}function V(t,n){if(t&1&&(i(0,"td"),c(1),o()),t&2){let e=n.$index,l=r().$implicit,s=r(2);a(),w(" ",s.isAndFormattedDate(l[e])," ")}}function O(t,n){if(t&1){let e=y();i(0,"button",5),E("click",function(s){P(e);let L=r().$implicit,R=r(2);return b(R.abort(L[0],s))}),x(1,"img",6),o()}if(t&2){let e=r(3);B("border-0",e.isNotLogged()),C("disabled",e.isNotLogged()),a(),C("src","static/icons/remover.png",g)}}function z(t,n){if(t&1&&(i(0,"tr"),p(1,V,2,1,"td",null,d),i(3,"td"),_(4,O,2,4,"button",4),o()()),t&2){let e=n.$implicit,l=r(2);a(),u(l.callColumns()),a(3),f(e[7]==="EXECUTANDO"?4:-1)}}function X(t,n){if(t&1&&(i(0,"table",2)(1,"thead")(2,"tr"),p(3,j,2,1,"th",null,d),x(5,"th"),o()(),i(6,"tbody"),p(7,z,5,1,"tr",null,d),o()()),t&2){let e=r();a(3),u(e.callColumns()),a(4),u(e.callsRows())}}var $=class t{pushButtonPanelStore=m(N);callsState=this.pushButtonPanelStore.callsState;callColumns=this.pushButtonPanelStore.callsColumns;callsRows=this.pushButtonPanelStore.callsRows;dataUtil=I.init();authService=m(k);destroyRef=m(S);modalService=m(A);isNotLogged=D(()=>!this.authService.isLogged());constructor(){this.pushButtonPanelStore.loadCalls()}isAndFormattedDate(n){return this.dataUtil.isAndFormattedDate(n)}abort(n,e){this.isNotLogged()||this.modalService.openConfirmation({title:"Confirma\xE7\xE3o",message:"Confirma remover o chamado e abortar a miss\xE3o?"}).afterClose.pipe(h(1)).subscribe(l=>l&&this.pushButtonPanelStore.abortCall(n)),e.preventDefault(),e.stopPropagation()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=v({type:t,selectors:[["app-push-button-panel-call"]],standalone:!0,features:[F],decls:6,vars:1,consts:[[1,"d-flex","justify-content-between","align-items-center"],[1,"card"],[1,"table","table-striped","table-bordered","mt-3"],[1,"card-body","d-flex","justify-content-center"],[1,"btn","d-flex","flex-column","align-items-center",3,"border-0","disabled"],[1,"btn","d-flex","flex-column","align-items-center",3,"click","disabled"],[1,"remove_icon",3,"src"]],template:function(e,l){if(e&1&&(i(0,"div",0)(1,"h3"),c(2,"Chamados Botoeiras"),o()(),_(3,U,3,0,"div",1)(4,M,3,0,"div",1)(5,X,9,0,"table",2)),e&2){let s;a(3),f((s=l.callsState().state)==="loading"?3:s==="error"?4:s==="success"?5:-1)}},styles:[".remove_icon[_ngcontent-%COMP%]{width:30px}"]})};export{$ as PushButtonPanelCallComponent};
