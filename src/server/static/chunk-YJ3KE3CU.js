import{a as A}from"./chunk-AZYVGLQ2.js";import{a as U}from"./chunk-ZQFK667Q.js";import{a as k}from"./chunk-BAP55IBU.js";import{a as m,b as R,c as M,d as $,e as O}from"./chunk-4IFBPCWC.js";import{a as P}from"./chunk-ANSMRTUX.js";import{A as b,Ba as s,Bb as S,D as H,M as E,O as u,Oa as F,R as T,Tb as I,Va as g,Wa as y,X as n,Xa as f,Ya as h,Z as w,Za as o,_a as r,db as c,i as _,ib as l,jb as j,kb as q,lb as B,mb as D,w as x,y as v}from"./chunk-6VFV3J45.js";import"./chunk-2VMXMS7J.js";var p=class t{http=n(I);loadHistories(){return this.http.post(`${P.REST}/history/list`,{})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=T({token:t,factory:t.\u0275fac})};var z={historyState:{data:null,state:"idle"},pesquisando:!1},C=R(O(z),$((t,i=n(p),e=n(k))=>({loadHistories(){m(t,{historyState:{data:null,state:"loading"},pesquisando:!1}),x(0,2e3).pipe(U(),v(()=>!t.pesquisando()),u(()=>m(t,{pesquisando:!0})),E(()=>i.loadHistories().pipe(H(1),u(a=>{m(t,{historyState:{data:a,state:"success"}})}),b(a=>(m(t,{historyState:{data:null,state:"error"}}),e.error(a.message),_)))),u(()=>m(t,{pesquisando:!1}))).subscribe()}})),M(t=>({historyColumns:S(()=>t.historyState()?.data?Object.keys(t.historyState().data[0]):[]),historyRows:S(()=>t.historyState()?.data?t.historyState().data?.map(i=>Object.values(i)):[])})));function G(t,i){t&1&&(o(0,"div",1)(1,"div",3),l(2,"Carregando..."),r()())}function J(t,i){t&1&&(o(0,"div",1)(1,"div",3),l(2," Erro ao carregar dados "),r()())}function K(t,i){if(t&1&&(o(0,"th"),l(1),r()),t&2){let e=i.$implicit;s(),j(e)}}function L(t,i){if(t&1&&(o(0,"td"),l(1),r()),t&2){let e=i.$index,a=c().$implicit,d=c(2);s(),q(" ",d.isAndFormattedDate(a[e])," ")}}function Q(t,i){if(t&1&&(o(0,"tr"),f(1,L,2,1,"td",null,y),r()),t&2){let e=c(2);s(),h(e.historyColumns())}}function V(t,i){if(t&1&&(o(0,"table",2)(1,"thead")(2,"tr"),f(3,K,2,1,"th",null,y),r()(),o(5,"tbody"),f(6,Q,3,0,"tr",null,y),r()()),t&2){let e=c();s(3),h(e.historyColumns()),s(3),h(e.historyRows())}}var N=class t{pushButtonPanelStore=n(C);historyState=this.pushButtonPanelStore.historyState;historyColumns=this.pushButtonPanelStore.historyColumns;historyRows=this.pushButtonPanelStore.historyRows;dataUtil=A.init();constructor(){this.pushButtonPanelStore.loadHistories()}isAndFormattedDate(i){return this.dataUtil.isAndFormattedDate(i)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=w({type:t,selectors:[["app-history"]],standalone:!0,features:[B([p,C]),D],decls:6,vars:1,consts:[[1,"d-flex","justify-content-between","align-items-center"],[1,"card"],[1,"table","table-striped","table-bordered","mt-3"],[1,"card-body","d-flex","justify-content-center"]],template:function(e,a){if(e&1&&(o(0,"div",0)(1,"h3"),l(2,"Hist\xF3rico"),r()(),F(3,G,3,0,"div",1)(4,J,3,0,"div",1)(5,V,8,0,"table",2)),e&2){let d;s(3),g((d=a.historyState().state)==="loading"?3:d==="error"?4:d==="success"?5:-1)}}})};export{N as HistoryComponent};
